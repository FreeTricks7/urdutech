name: Download PixelOS (SourceForge)

on:
  workflow_dispatch:

jobs:
  download:
    runs-on: ubuntu-latest
    timeout-minutes: 360  # Allow long downloads

    steps:
      - name: Checkout (optional)
        uses: actions/checkout@v4

      - name: Install aria2
        run: |
          sudo apt update
          sudo apt install -y aria2

      - name: Download PixelOS ZIP
        run: |
          mkdir -p downloads
          cd downloads

          aria2c \
            --file-allocation=trunc \
            --continue=false \
            --summary-interval=5 \
            --console-log-level=notice \
            --auto-file-renaming=false \
            --retry-wait=5 \
            --max-tries=5 \
            --timeout=60 \
            --connect-timeout=30 \
            --keep-unfinished-download-result=false \
            "https://master.dl.sourceforge.net/project/pixelos-releases/thirteen/surya/PixelOS_surya-13.0-20230706-1536.zip?viasf=1"

      - name: Verify file
        run: |
          ls -lh downloads
          du -h downloads/*

      - name: Upload as workflow artifact
        uses: actions/upload-artifact@v4
        with:
          name: PixelOS-surya
          path: downloads/PixelOS_surya-13.0-20230706-1536.zip
